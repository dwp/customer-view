{% extends "layouts/main.html" %}

{% block header %}

{{ super() }}

<style>
  .govuk-service-navigation__wrapper{
      flex-grow: 1;
  }
</style>

{% set navigationEnd %}
<li class="govuk-service-navigation__item" style="margin-left: auto;">
  <a class="govuk-service-navigation__link" href="#">Sign out</a>
</li>
{% endset %}

{{ govukServiceNavigation({

serviceName: "Get proof of your benefits and State Pension",

  slots: {
      navigationEnd: navigationEnd
  }
}) }}

{% endblock %}

{% block pageTitle %}
Request complete
{% endblock %}

{% block beforeContent %}

  {{ govukPhaseBanner({
    tag: {
      text: "Beta"
    },
    html: 'This is a new service. Help us improve it and <a class="govuk-link" href="#">give your feedback (opens in new tab)</a>.'
  }) }}

{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <div class="govuk-panel govuk-panel--confirmation">
        <h1 class="govuk-panel__title">
          Request complete
        </h1>
      </div>




      {% from "govuk/components/button/macro.njk" import govukButton %}


      {% if (data['digitalOrLetter'] == "Download a file" or data['digitalOrLetter'] == "Get both - download a file and get a letter in the post" or data['digitalOrLetter'] == "Get both - download files and get a letters in the post" or data['digitalOrLetter'] == "Download files")%}

        <!-- Check if there is any data in which-benefits-need-proofs -->
        {% if data['inScope'] %}
      <!-- 1. User selects only SP at the start-->
         {% if 'State Pension' in data['inScope'] and data['inScope']|length == 1 %}
        <h2 class="govuk-heading-m">Save proof of your State Pension to your device</h2>
          <!-- Looking to see if there is SP in initial selections -->
        {% elif 'State Pension' not in data['inScope'] and data['inScope']|length == 1 %}
        <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>

        {% elif 'State Pension' not in data['inScope'] and data['inScope']|length > 1 %}
        <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>



         <!-- 2. User selects multiple benefits and state pension at start then just state pension -->
          {% elif 'State Pension' in data['which-benefits-need-proof'] and data['which-benefits-need-proof']|length == 1 %}
          <h2 class="govuk-heading-m">Save proof of your State Pension to your device</h2>


          <!-- 3. User selects multiple benefits and state pension at start then state pension other benefits -->
          {% elif 'State Pension' in data['which-benefits-need-proof'] and data['which-benefits-need-proof']|length > 1 %}
          <h2 class="govuk-heading-m">Save proof of your benefits and State Pension to your device</h2>

            {% elif 'State Pension' not in data['which-benefits-need-proof'] %}
            <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>
              {% endif %}
              {% else %}
              <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>
            {% endif %}

    {% if data['inScope'].length == 1 %}
    <p><a href="/public/images/Proof of Benefit.pdf" download="">Download proof of {{ data['inScope'][0] }} (PDF, 4.2KB)</a></p>
    {% endif %}

    {% if data['inScope'].length > 1 %}
     {% for benefit in data['which-benefits-need-proof'] %}
     {% if benefit in data['which-benefits-need-proof'] %}
       <p><a href="/public/images/Proof of Benefit.pdf" download="">Download proof of {{ benefit }} (PDF, 4.2KB)</a></p>
       {% endif %}
       {% endfor %}
       {% endif %}
              {% endif %}







      <!--
      {% if 'State Pension' in data.researchSetUpBenefits and data.researchSetUpBenefits|length > 1 %}
      <h2 class="govuk-heading-m">Save proof of your benefits and State Pension to your device</h2>
    {% elif 'State Pension' in data.researchSetUpBenefits %}
      <h2 class="govuk-heading-m">Save proof of your State Pension to your device</h2>
    {% elif data.researchSetUpBenefits %}
      <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>
    {% endif %}-->


    {% from "govuk/components/button/macro.njk" import govukButton %}

    {% if data['digitalOrLetter'] != "Download a file" and data['digitalOrLetter'] != "Download files" %}

      <h2 class="govuk-heading-m">
        What happens next
      </h2>


<!-- Shows different messages based on number of benefits requested:
           - Single benefit: Shows simple message
           - Two benefits: Uses formatList filter to show both
           - Three or more: Shows as bullet points -->

<!-- If user has one in scope benefits, and has chosen letter / digital or both-->


  

          

<!-- If user has one in scope benefits, and has chosen letter / digital or both, need to account for only one in scope benefit from initially research setup, and the second decision of which benefits need proof-->
      
    {% if data['inScope']|length == 1 %}
    <p>You have requested proof of {{ data['inScope'][0] }}.</p>
  
    {% set is_post = data['digitalOrLetter'] in [
      "Letter in the post", 
      "Letters in the post", 
      "Get both - download a file and get a letter in the post", 
      "Get both - download files and get a letters in the post"
    ] %}
  
    {% if is_post %}
      {% if data['altFormats'] == "Alternative formats" %}
        <p>A standard copy of your letter should arrive within one week.</p>
        <p>You will also get a letter in an alternative format, like Braille, audio or large print. You will get this in the format you have asked for previously.</p>
        <p>This may take longer than the standard letter. We cannot give an exact delivery time for alternative formats.</p>
      {% else %}
        <p>Your letter should arrive within one week.</p>
      {% endif %}
    {% endif %}
  {% endif %}
  
  <!-- if the users has more than one in scope benefit but chooses to get proof of only in benefit-->

  {% if data['which-benefits-need-proof']|length == 1 %}
  <p>You have requested proof of {{ data['which-benefits-need-proof'][0] }}.</p>

  {% set is_post = data['digitalOrLetter'] in [
    "Letter in the post", 
    "Letters in the post", 
    "Get both - download a file and get a letter in the post", 
    "Get both - download files and get a letters in the post"
  ] %}

  {% if is_post %}
    {% if data['altFormats'] == "Alternative formats" %}
      <p>A standard copy of your letter should arrive within one week.</p>
      <p>You will also get a letter in an alternative format, like Braille, audio or large print. You will get this in the format you have asked for previously.</p>
      <p>This may take longer than the standard letter. We cannot give an exact delivery time for alternative formats.</p>
    {% else %}
      <p>Your letter should arrive within one week.</p>
    {% endif %}
  {% endif %}



   <!-- If user has two in scope benefits, and has chosen letter / digital or both -->
{% elif data['which-benefits-need-proof'].length === 2 %}
  
<p>You have requested proof of {{ data['which-benefits-need-proof'] | formatList }}.</p>
 
 
{% set is_post = data['digitalOrLetter'] in [
"Letter in the post", 
"Letters in the post", 
"Get both - download a file and get a letter in the post", 
"Get both - download files and get a letters in the post"
] %}

{% if is_post %}
{% if data['altFormats'] == "Alternative formats" %}
  <p>Standard copies of each benefit letter should arrive within one week.</p>
  <p>You will also get a letter in alternative formats, like Braille, audio or large print. These will arrive in the formats you have asked for previously.</p>
  <p>They may take longer than the standard letters. We cannot give an exact delivery time for alternative formats.</p>
{% else %}
  <p>Separate letters should arrive within one week. </p>
{% endif %}
{% endif %}






<!-- If user has more than two in scope benefits, and has chosen letter / digital or both -->
{% elif data['which-benefits-need-proof'].length > 2 %}
  
<p>You have requested proof of:</p>
        <ul class="govuk-list govuk-list--bullet">
            {% for benefit in data['which-benefits-need-proof'] %}
              <li>{{ benefit }}</li>
          {% endfor %}    
        </ul>

        {% set is_post = data['digitalOrLetter'] in [
        "Letter in the post", 
        "Letters in the post", 
        "Get both - download a file and get a letter in the post", 
        "Get both - download files and get a letters in the post"
        ] %}
        
        {% if is_post %}
        {% if data['altFormats'] == "Alternative formats" %}
  <p>Standard copies of each benefit letter should arrive within one week.</p>
  <p>You will also get a letter in alternative formats, like Braille, audio or large print. These will arrive in the formats you have asked for previously.</p>
  <p>They may take longer than the standard letters. We cannot give an exact delivery time for alternative formats.</p>
{% else %}
  <p>Separate letters should arrive within one week. </p>
{% endif %}
{% endif %}
{% endif %}
{% endif %}






        
 
 




<!-- If user has more than two in scope benefits, and has chosen letter / digital or both-->
  
  
 















      <!-- Shows different messages and layouts based on number of out-of-scope benefits:
           - Single benefit: Simple message with link
           - Two benefits: Uses formatList filter to show both
           - Three or more: Bullet point list -->
      {% if data['oOScope'].length === 1 %}
        <h2 class="govuk-heading-m">
          How to get proof of your other benefits
        </h2>

        <p>To get proof of {{ data['oOScope'][0] }}, you need to contact them.</p>


        <p>Find their details for in a letter they have sent to you, or in <a href="https://www.gov.uk/browse/benefits" class="govuk-link" rel="noreferrer noopener" target="_blank">guidance about the benefit on GOV.UK (opens in a new tab)</a>.</p>

      {% elif data['oOScope'].length === 2 %}
        <h2 class="govuk-heading-m">
          How to get proof of your other benefits
        </h2>


        <p>To get proof of  {{ data['oOScope'] | formatList }}, you need to contact them.</p>

        <p>Find their details in letters they have sent to you, or in <a href="https://www.gov.uk/browse/benefits" class="govuk-link" rel="noreferrer noopener" target="_blank">guidance about the benefit on GOV.UK (opens in a new tab)</a>.</p>


      {% elif data['oOScope'].length > 2 %}
        <h2 class="govuk-heading-m">
          How to get proof of your other benefits
        </h2>

        <p>You will need to contact each benefit to get proof of benefit letters for:</p>
        <ul class="govuk-list govuk-list--bullet">
            {% for benefit in data['oOScope'] %}
              <li>{{ benefit }}</li>
            {% else %}
              <p>No benefit selected</p>
            {% endfor %}
        </ul>

        <p>Find their contact details in letters they have sent to you, or in <a href="https://www.gov.uk/browse/benefits" class="govuk-link" rel="noreferrer noopener" target="_blank">guidance about the benefit on GOV.UK (opens in a new tab)</a>.</p>

      {% endif %}

      <!-- Special handling for Universal Credit (uCBenefit flag)
           Shows UC guidance either with or without a heading depending on
           whether there are other out-of-scope benefits -->
      {% if data['uCBenefit'] == true %}
        {% if data['oOScope'].length === 0 %}
        <h2 class="govuk-heading-m">
          How to get proof of your other benefits
        </h2>

        <p>To get proof of Universal Credit, <a href="https://www.gov.uk/sign-in-universal-credit" class="govuk-link" rel="noreferrer noopener" target="_blank"> sign in to your Universal Credit account (opens in a new tab)</a>.</p>

        {% else %}
        <p>To get proof of Universal Credit, <a href="https://www.gov.uk/sign-in-universal-credit" class="govuk-link" rel="noreferrer noopener" target="_blank"> sign in to your Universal Credit account (opens in a new tab)</a>.</p>
        {% endif %}
      {% endif %}

      <br>
      
      <div class="govuk-button-group">
        {{ govukButton({
          text: "Sign out",
          href: "signout",
          classes: "govuk-button"
        }) }}

        {{ govukButton({
          text: "Go back to account home",
          href: "account-home",
          classes: "govuk-button--secondary"
        }) }}
      </div>

  </div>
</div>

{% endblock %}