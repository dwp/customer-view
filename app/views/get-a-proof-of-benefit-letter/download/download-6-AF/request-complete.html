{% extends "layouts/main.html" %}

{% block header %}

{{ super() }}

<style>
  .govuk-service-navigation__wrapper {
    flex-grow: 1;
  }
</style>

{% set navigationEnd %}
<li class="govuk-service-navigation__item" style="margin-left: auto;">
  <a class="govuk-service-navigation__link" href="#">Sign out</a>
</li>
{% endset %}

{{ govukServiceNavigation({

serviceName: "Get proof of your benefits and State Pension",

slots: {
navigationEnd: navigationEnd
}
}) }}

{% endblock %}

{% block pageTitle %}
Request complete
{% endblock %}

{% block beforeContent %}

{{ govukPhaseBanner({
tag: {
text: "Beta"
},
html: 'This is a new service. Help us improve it and <a class="govuk-link" href="#">give your feedback (opens in new
  tab)</a>.'
}) }}

{% endblock %}

{% block content %}



<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <div class="govuk-panel govuk-panel--confirmation">
      <h1 class="govuk-panel__title">
        Request complete
      </h1>
    </div>



    {% if (data['digitalOrLetter'] is defined and ("Letter in the post" in data['digitalOrLetter'] or "Letters in the post" in data['digitalOrLetter'])) or data['altFormat'] is defined %}
    <!-- If user has one in scope benefits, and has chosen letter / digital or both, need to account for only one in scope benefit from initially research setup, and the second decision of which benefits need proof-->

    {% if data['inScope']|length == 1 %}
    <p>You have requested proof of {{ data['inScope'][0] }}.</p>

    <!-- if the users has more than one in scope benefit but chooses to get proof of only in benefit-->

    {% elif data['which-benefits-need-proof']|length == 1 %}
    <p>You have requested proof of {{ data['which-benefits-need-proof'][0] }}.</p>

    <!-- If user has two in scope benefits, and has chosen letter / digital or both -->

    {% elif data['which-benefits-need-proof']|length === 2 %}
    <p>You have requested proof of {{ data['which-benefits-need-proof'] | formatList }}.</p>


    <!-- If user has more than two in scope benefits, and has chosen letter / digital or both -->
    {% elif data['which-benefits-need-proof']|length > 2 %}

    <p>You have requested proof of:</p>
    <ul class="govuk-list govuk-list--bullet">
      {% for benefit in data['which-benefits-need-proof'] %}
      <li>{{ benefit }}</li>
      {% endfor %}
    </ul>
    {% endif %}
    {% endif %}

    

<!--this is what makes the download content show when its the only option selected -->
{% if data['digitalOrLetter'] is defined and ("Download a file" in data['digitalOrLetter'] or "Download files" in data['digitalOrLetter']) %}
  {% if data['altFormat'] is defined %}
    <p></p><!-- Content for download + altFormat -->
  {% else %}
  {% from "govuk/components/button/macro.njk" import govukButton %}

    <!-- Check if there is any data in which-benefits-need-proofs -->
    {% if data['inScope'] %}
    <!-- 1. User selects only SP at the start-->
    {% if 'State Pension' in data['inScope'] and data['inScope']|length == 1 %}
    <h2 class="govuk-heading-m">Save proof of your State Pension to your device</h2>
    <!-- Looking to see if there is SP in initial selections -->
    {% elif 'State Pension' not in data['inScope'] and data['inScope']|length == 1 %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>

    {% elif 'State Pension' not in data['inScope'] and data['inScope']|length > 1 %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>



    <!-- 2. User selects multiple benefits and state pension at start then just state pension -->
    {% elif 'State Pension' in data['which-benefits-need-proof'] and data['which-benefits-need-proof']|length == 1 %}
    <h2 class="govuk-heading-m">Save proof of your State Pension to your device</h2>


    <!-- 3. User selects multiple benefits and state pension at start then state pension other benefits -->
    {% elif 'State Pension' in data['which-benefits-need-proof'] and data['which-benefits-need-proof']|length > 1 %}
    <h2 class="govuk-heading-m">Save proof of your benefits and State Pension to your device</h2>

    {% elif 'State Pension' not in data['which-benefits-need-proof'] %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>
    {% endif %}
    {% else %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>
    {% endif %}

    {% if data['inScope'].length == 1 %}
    <p><a href="/public/images/Proof of Benefit.pdf" download="">Download proof of {{ data['inScope'][0] }} (PDF,
        4.2KB)</a></p>
    {% endif %}

    {% if data['inScope'].length > 1 %}
    {% for benefit in data['which-benefits-need-proof'] %}
    {% if benefit in data['which-benefits-need-proof'] %}
    <p><a href="/public/images/Proof of Benefit.pdf" download="">Download proof of {{ benefit }} (PDF, 4.2KB)</a></p>
    {% endif %}
    {% endfor %}
    {% endif %}
    <!-- Content above for when only download has been selected -->
  {% endif %}
{% endif %}





    <!-- Download -->

    {% from "govuk/components/button/macro.njk" import govukButton %}

    {% if (data['digitalOrLetter'] is defined and ("Download a file" in data['digitalOrLetter'] or "Download files" in data['digitalOrLetter'])) and data['altFormat'] is defined %}

    <!-- Check if there is any data in which-benefits-need-proofs -->
    {% if data['inScope'] %}
    <!-- 1. User selects only SP at the start-->
    {% if 'State Pension' in data['inScope'] and data['inScope']|length == 1 %}
    <h2 class="govuk-heading-m">Save proof of your State Pension to your device</h2>
    <!-- Looking to see if there is SP in initial selections -->
    {% elif 'State Pension' not in data['inScope'] and data['inScope']|length == 1 %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>

    {% elif 'State Pension' not in data['inScope'] and data['inScope']|length > 1 %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>



    <!-- 2. User selects multiple benefits and state pension at start then just state pension -->
    {% elif 'State Pension' in data['which-benefits-need-proof'] and data['which-benefits-need-proof']|length == 1 %}
    <h2 class="govuk-heading-m">Save proof of your State Pension to your device</h2>


    <!-- 3. User selects multiple benefits and state pension at start then state pension other benefits -->
    {% elif 'State Pension' in data['which-benefits-need-proof'] and data['which-benefits-need-proof']|length > 1 %}
    <h2 class="govuk-heading-m">Save proof of your benefits and State Pension to your device</h2>

    {% elif 'State Pension' not in data['which-benefits-need-proof'] %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>
    {% endif %}
    {% else %}
    <h2 class="govuk-heading-m">Save proof of your benefits to your device</h2>
    {% endif %}

    {% if data['inScope'].length == 1 %}
    <p><a href="/public/images/Proof of Benefit.pdf" download="">Download proof of {{ data['inScope'][0] }} (PDF,
        4.2KB)</a></p>
    {% endif %}

    {% if data['inScope'].length > 1 %}
    {% for benefit in data['which-benefits-need-proof'] %}
    {% if benefit in data['which-benefits-need-proof'] %}
    <p><a href="/public/images/Proof of Benefit.pdf" download="">Download proof of {{ benefit }} (PDF, 4.2KB)</a></p>
    {% endif %}
    {% endfor %}
    {% endif %}
    {% endif %}


    {% from "govuk/components/button/macro.njk" import govukButton %}

    <!--end of download section-->



    <!-- Letters and Alt format dynamic content -->

{% if data['altFormat'] %}

    <h2 class="govuk-heading-m">
      What happens next
    </h2>

    <!-- Shows different messages based on number of benefits requested:
           - Single benefit: Shows simple message
           - Two benefits: Uses formatList filter to show both
           - Three or more: Shows as bullet points -->

    <!-- If user has one in scope benefits, and has chosen letter / digital or both-->

    <!-- If user has one in scope benefits, and has chosen letter / digital or both, need to account for only one in scope benefit from initially research setup, and the second decision of which benefits need proof-->

     {% if data['inScope'] and data['inScope']|length == 1 %}
    
    <div class="govuk-body">
      You will get
      {% if data['altFormats'] in ["Braille", "Coloured paper", "Large Print", "Large print", "Word document"] %}
      a
      {% else %}
      an
      {% endif %}
      {{data['altFormats']}}
      version of your letter within

      {% if data['altFormats'] in ["Braille", "Word document"] %}
      3 weeks.

      {% elif data['altFormats'] in ["Large Print", "Coloured paper"] %}
      1 week.

      {% else %}
      1 month.
      {% endif %}

    {% if data['altFormats'] in ["Braille", "Audio recording", "British Sign Language (BSL)"] %}
      <p>This will include a standard letter in the same envelope.</p>
    {% endif %}
    </div>

    <!-- if the users has more than one in scope benefit but chooses to get proof of only in benefit-->
    {% elif data['which-benefits-need-proof']|length == 1 %}

    <div class="govuk-body">
      
      You will get
      {% if data['altFormats'] in ["Braille", "Coloured paper", "Large Print", "Large print", "Word document"] %}
      a
      {% else %}
      an
      {% endif %}
      {{data['altFormats']}}
      version of your letter within

      {% if data['altFormats'] in ["Braille", "Word document"] %}
      3 weeks.

      {% elif data['altFormats'] in ["Large Print", "Coloured paper"] %}
      1 week.

      {% else %}
      1 month.
      {% endif %}

    {% if data['altFormats'] in ["Braille", "Audio recording", "British Sign Language (BSL)"] %}
      <p>This will include a standard letter in the same envelope.</p>
      {% endif %}
    </div>

    <!-- If user has two in scope benefits, and has chosen letter / digital or both -->

    {% elif data['which-benefits-need-proof']|length == 2 %}
  <div class="govuk-body">
    You will get
    
    {{ data['altFormats'] }} versions of your letters within

    {% if data['altFormat'][0] in ["Braille", "Word document"] %}
      3 weeks.
    {% elif data['altFormat'][0] in ["Large Print", "Coloured paper"] %}
      1 week.
    {% else %}
      1 month.
    {% endif %}

    {% if data['altFormat'][0] in ["Braille", "Audio recording", "British Sign Language (BSL)"] %}
      <p>This will include standard letters in the same envelope.</p>
    {% endif %}
  </div>

    

    <!-- If user has more than two in scope benefits, and has chosen letter / digital or both -->
    {% elif data['which-benefits-need-proof']|length > 2 %}

    <div class="govuk-body">
      
      You will get
      
      {{data['altFormats']}}
      versions of your letters within

      {% if data['altFormats'] in ["Braille", "Word document"] %}
      3 weeks.

      {% elif data['altFormats'] in ["Large Print", "Coloured paper"] %}
      1 week.

      {% else %}
      1 month.
      {% endif %}

    {% if data['altFormats'] in ["Braille", "Audio recording", "British Sign Language (BSL)"] %}
      <p>This will include a standard letters in the same envelope.
      </p>
  {% endif %}
    </div>
   {% endif %}
  {% endif %}
  
<!-- End Letters and Alt format dynamic content -->


    <!-- Shows different messages and layouts based on number of out-of-scope benefits:
           - Single benefit: Simple message with link
           - Two benefits: Uses formatList filter to show both
           - Three or more: Bullet point list -->
    {% if data['oOScope'].length === 1 %}
    <h2 class="govuk-heading-m">
      How to get proof of your other benefits
    </h2>

    <p>To get proof of {{ data['oOScope'][0] }}, you need to contact them.</p>


    <p>Find their details for in a letter they have sent to you, or in <a href="https://www.gov.uk/browse/benefits"
        class="govuk-link" rel="noreferrer noopener" target="_blank">guidance about the benefit on GOV.UK (opens in a
        new tab)</a>.</p>

    {% elif data['oOScope'].length === 2 %}
    <h2 class="govuk-heading-m">
      How to get proof of your other benefits
    </h2>


    <p>To get proof of {{ data['oOScope'] | formatList }}, you need to contact them.</p>

    <p>Find their details in letters they have sent to you, or in <a href="https://www.gov.uk/browse/benefits"
        class="govuk-link" rel="noreferrer noopener" target="_blank">guidance about the benefit on GOV.UK (opens in a
        new tab)</a>.</p>


    {% elif data['oOScope'].length > 2 %}
    <h2 class="govuk-heading-m">
      How to get proof of your other benefits
    </h2>

    <p>You will need to contact each benefit to get proof of benefit letters for:</p>
    <ul class="govuk-list govuk-list--bullet">
      {% for benefit in data['oOScope'] %}
      <li>{{ benefit }}</li>
      {% else %}
      <p>No benefit selected</p>
      {% endfor %}
    </ul>

    <p>Find their contact details in letters they have sent to you, or in <a href="https://www.gov.uk/browse/benefits"
        class="govuk-link" rel="noreferrer noopener" target="_blank">guidance about the benefit on GOV.UK (opens in a
        new tab)</a>.</p>

    {% endif %}

    <!-- Special handling for Universal Credit (uCBenefit flag)
           Shows UC guidance either with or without a heading depending on
           whether there are other out-of-scope benefits -->
    {% if data['uCBenefit'] == true %}
    {% if data['oOScope'].length === 0 %}
    <h2 class="govuk-heading-m">
      How to get proof of your other benefits
    </h2>

    <p>To get proof of Universal Credit, <a href="https://www.gov.uk/sign-in-universal-credit" class="govuk-link"
        rel="noreferrer noopener" target="_blank"> sign in to your Universal Credit account (opens in a new tab)</a>.
    </p>

    {% else %}
    <p>To get proof of Universal Credit, <a href="https://www.gov.uk/sign-in-universal-credit" class="govuk-link"
        rel="noreferrer noopener" target="_blank"> sign in to your Universal Credit account (opens in a new tab)</a>.
    </p>
    {% endif %}
    {% endif %}

    <br>

    <div class="govuk-button-group">
      {{ govukButton({
      text: "Sign out",
      href: "signout",
      classes: "govuk-button"
      }) }}

      {{ govukButton({
      text: "Go back to account home",
      href: "account-home",
      classes: "govuk-button--secondary"
      }) }}
    </div>

  </div>
</div>

{% endblock %}